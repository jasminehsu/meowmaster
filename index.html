
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å–µï½æ™‚åˆ» Meow~ Moment Â· Phase G (No Babel)</title>
  <meta name="theme-color" content="#F2F0EB" />
  <style>
    body { margin:0; font-family:system-ui,-apple-system,BlinkMacSystemFont,"Noto Sans TC",sans-serif; background:#F2F0EB; color:#222; }
    .wrap { max-width:620px; margin:0 auto; padding:0 16px 28px; }
    .top-space { height: 18px; }

    /* Header */
    .header {
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: blur(12px);
      background: rgba(242,240,235,.55);
      border-bottom: 1px solid rgba(120,113,108,.10);
      transition: background .25s ease, box-shadow .25s ease, border-color .25s ease;
    }
    .header.scrolled{
      background: rgba(242,240,235,.78);
      border-bottom-color: rgba(120,113,108,.14);
      box-shadow: 0 10px 26px rgba(0,0,0,.08);
    }
    .header-inner {
      max-width: 620px; margin: 0 auto;
      padding: 16px 16px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .brand { display:flex; align-items:center; gap:10px; cursor: default; }
    .brand .logo { display:flex; align-items:center; }

    .logo svg { width:48px; height:48px; opacity:.9; } /* mobile */
@media (min-width: 768px){
  .logo svg { width:32px; height:32px; } /* desktop */
}

    .brand .title { font-size: 12px; letter-spacing:.22em; font-weight:700; color:#2d2d2d; }
    .brand .sub { font-size: 10px; color:#8a8a8a; letter-spacing:.14em; margin-top:2px; }

    .h-actions { display:flex; align-items:center; gap:10px; }
    .icon-btn {
  width:72px; height:72px; /* mobile */
  border-radius:999px;
  display:flex; align-items:center; justify-content:center;
  border:1px solid rgba(120,113,108,.18);
  background: rgba(255,255,255,.55);
  cursor:pointer;
  transition: transform .15s ease, background .2s ease, border-color .2s ease;
  user-select:none;
}
@media (min-width: 768px){
  .icon-btn { width:56px; height:56px; } /* desktop */
}
    .icon-btn:hover { background:#fff; border-color: rgba(120,113,108,.28); transform: translateY(-1px); }
    .icon { opacity:.85; }
    .icon-btn svg { width:48px; height:48px; } /* mobile: ~3x */
@media (min-width: 768px){
  .icon-btn svg { width:36px; height:36px; } /* desktop: ~2x */
}
    .badge svg { width:40px; height:40px; } /* mobile */
@media (min-width: 768px){
  .badge svg { width:28px; height:28px; } /* desktop */
}

    .badge {
  display:inline-flex; align-items:center; gap:10px;
  padding:10px 14px; /* mobile */
  border-radius:999px;
  background: rgba(255,255,255,.55);
  border:1px solid rgba(120,113,108,.18);
  font-size:14px;
  color:#6f6f6f;
  user-select:none;
}
@media (min-width: 768px){
  .badge { padding:6px 10px; font-size:12px; } /* desktop */
}
    .badge .fish { font-size:14px; opacity:.85; }
    .badge .count { font-weight:700; color:#444; min-width: 18px; text-align:center; }

    /* Card */
    .card {
      background:rgba(255,255,255,.92);
      border-radius:28px;
      padding:28px;
      box-shadow:0 18px 40px rgba(0,0,0,.12);
      border:1px solid rgba(255,255,255,.6);
      backdrop-filter: blur(10px);
      margin-top: 18px;
    }

    h2 { margin:0 0 8px 0; font-weight:700; letter-spacing:.02em; }
    .muted { color:#7a7a7a; font-size:14px; line-height:1.6; }

    /* Status pills */
    .states { display:flex; flex-wrap:wrap; gap:12px; margin-top:18px; }
    .state {
      display:flex; align-items:center; gap:10px;
      padding:12px 18px; border-radius:999px;
      background:rgba(255,255,255,.6);
      border:1px solid #e5e2dc;
      cursor:pointer; font-size:14px;
      transition:background .2s, box-shadow .2s, transform .2s, border-color .2s;
      user-select:none;
    }
    .state:hover { background:#fff; box-shadow:0 10px 22px rgba(0,0,0,.08); transform: translateY(-1px); border-color:#e0ddd6; }
    .state.active {
      background:#222; color:#fff; border-color:#222;
      box-shadow:0 14px 28px rgba(0,0,0,.18);
      transform: translateY(-1px);
    }
    .state .icon { opacity:.85; }

    /* Quote */
    .quote {
      font-size:26px; line-height:1.55; margin:18px 0 10px 0;
      letter-spacing:.02em;
      text-align:center;
    }
    .author { font-size:12px; color:#888; letter-spacing:.18em; text-transform:uppercase; text-align:center; }

    /* Cat selector */
    .cats { display:grid; grid-template-columns:repeat(2,1fr); gap:14px; margin-top:18px; }
    .cat {
      position:relative;
      border-radius:22px;
      background:rgba(255,255,255,.85);
      border:1px solid #e5e2dc;
      padding:16px 12px 14px;
      text-align:center;
      cursor:pointer;
      user-select:none;
      transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease;
    }
    .cat:hover {
      transform: translateY(-2px) rotate(-0.4deg);
      box-shadow:0 14px 28px rgba(0,0,0,.10);
      border-color:#dedad3;
    }
    .cat svg { width:72px; height:72px; filter: drop-shadow(0 6px 10px rgba(0,0,0,.10)); }
    .cat-name { margin-top:10px; font-size:13px; color:#5a5a5a; letter-spacing:.06em; }

    @keyframes stamp-pop {
      0% { transform: scale(1.8) rotate(-12deg); opacity: 0; }
      70% { transform: scale(0.95) rotate(-12deg); opacity: 1; }
      100% { transform: scale(1) rotate(-12deg); opacity: 1; }
    }
    .stamp {
      position:absolute;
      top:10px; right:10px;
      color:#c8c2b8;
      opacity:.95;
      transform: rotate(-12deg);
      animation: stamp-pop .35s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      pointer-events:none;
      font-size:18px;
    }

    /* Prescription paper */
    .rx {
      margin-top:18px;
      background:#FFFDF7;
      border:1px solid #e2dccc;
      border-radius:22px;
      padding:22px;
      position:relative;
      overflow:hidden;
    }
    .rx::after {
      content:"";
      position:absolute; inset:0;
      background-image:radial-gradient(circle at 1px 1px, rgba(120,113,108,.12) 1px, transparent 0);
      background-size:10px 10px;
      opacity:.35;
      pointer-events:none;
    }
    .rx-head {
      display:flex; justify-content:space-between;
      font-size:11px; color:#7d7d7d;
      letter-spacing:.14em;
      position:relative; z-index:1;
    }
    .rx-body {
      margin-top:14px;
      font-size:16px;
      text-align:center;
      line-height:1.8;
      color:#4b4b4b;
      position:relative; z-index:1;
    }
    .rx-foot {
      margin-top:16px;
      text-align:center;
      font-size:10px;
      color:#b6b0a6;
      letter-spacing:.22em;
      position:relative; z-index:1;
      text-transform:uppercase;
    }

    .actions { display:flex; gap:10px; margin-top:18px; flex-wrap:wrap; justify-content:center; }
    button { border:none; border-radius:999px; padding:10px 16px; cursor:pointer; background:#222; color:#fff; font-size:14px; }
    button.secondary { background:#efefef; color:#222; }

    /* Favorites drawer */
    .overlay {
      position:fixed; inset:0; background: rgba(0,0,0,.22);
      backdrop-filter: blur(2px);
      z-index: 80;
      display:flex; justify-content:flex-end;
    }
    .drawer {
      width: min(360px, 92vw);
      height: 100%;
      background:#F2F0EB;
      border-left: 1px solid rgba(120,113,108,.18);
      box-shadow: -18px 0 40px rgba(0,0,0,.18);
      padding: 18px;
      overflow:auto;
    }
    .drawer h3 { margin: 6px 0 14px; font-size:14px; letter-spacing:.18em; color:#2d2d2d; }
    .fav-item { background: rgba(255,255,255,.72); border:1px solid rgba(120,113,108,.14); border-radius:16px; padding:14px; margin-bottom:12px; }
    .fav-main { font-size:14px; line-height:1.6; color:#333; }
    .fav-meta { margin-top:8px; font-size:10px; letter-spacing:.18em; color:#888; text-transform:uppercase; display:flex; justify-content:space-between; gap:8px; }
    .fav-actions { margin-top:10px; display:flex; justify-content:flex-end; gap:10px; }
    .link-btn { background:transparent; border:none; cursor:pointer; color:#666; font-size:12px; text-decoration: underline; text-underline-offset: 4px; }
    .toast {
      position: fixed; bottom: 22px; left: 50%; transform: translateX(-50%);
      background: rgba(30,30,30,.92); color:#fff;
      padding: 10px 14px; border-radius: 999px;
      font-size: 12px; letter-spacing:.14em;
      z-index: 120;
      opacity: 0; transition: opacity .2s ease, transform .2s ease;
      pointer-events:none;
    }
    .toast.show { opacity: 1; transform: translateX(-50%) translateY(-2px); }
  
    .lang-menu {
      position:absolute;
      top: 86px;
      right: 16px;
      background: rgba(255,255,255,.92);
      border:1px solid rgba(120,113,108,.18);
      border-radius: 14px;
      box-shadow: 0 16px 34px rgba(0,0,0,.14);
      padding: 8px;
      z-index: 120;
      min-width: 140px;
    }
    .lang-item{
      padding:10px 10px;
      border-radius: 12px;
      cursor:pointer;
      font-size: 12px;
      color:#333;
      display:flex;
      justify-content:space-between;
      align-items:center;
      user-select:none;
    }
    .lang-item:hover{ background: rgba(120,113,108,.08); }
    .lang-item.active{ background: rgba(34,34,34,.08); font-weight:700; }


    /* Mobile optimizations */
    @media (max-width: 420px){
      .header-inner { padding: 12px 12px; gap: 8px; }
      .brand { gap: 8px; }
      .brand .title { font-size: 11px; }
      .brand .sub { font-size: 9px; }
      .badge { padding: 6px 8px; font-size: 11px; gap: 8px; }
      .h-actions { gap: 8px; }
      .card { padding: 18px; border-radius: 22px; }
      h2 { font-size: 18px; }
      .muted { font-size: 13px; }
      .quote { font-size: 20px; margin: 14px 0 8px 0; }
      .author { font-size: 11px; }
      .states { gap: 10px; }
      .state { padding: 10px 14px; font-size: 13px; gap: 8px; }
      .cats { grid-template-columns: 1fr; gap: 12px; }
      .cat svg { width: 64px; height: 64px; }
      .rx { padding: 18px; }
      .actions { gap: 8px; }
      button { padding: 10px 14px; font-size: 14px; }
      .drawer { width: 92vw; }
      .lang-menu { right: 12px; top: 76px; }
    }

    @media (max-width: 360px){
      .icon-btn { width: 22px; height: 22px; }
      .header .icon-btn svg { width: 6px; height: 6px; }
      .badge svg { width: 10px; height: 10px; }
      .logo svg { width: 20px; height: 20px; }
    }


    /* Mobile: collapse header icons into More (...) */
    .more-wrap { position: relative; }
    .more-menu {
      position:absolute;
      top: 54px;
      right: 0;
      background: rgba(255,255,255,.94);
      border:1px solid rgba(120,113,108,.18);
      border-radius: 14px;
      box-shadow: 0 16px 34px rgba(0,0,0,.14);
      padding: 8px;
      z-index: 140;
      min-width: 180px;
    }
    .more-item{
      padding:10px 10px;
      border-radius: 12px;
      cursor:pointer;
      font-size: 12px;
      color:#333;
      display:flex;
      justify-content:space-between;
      align-items:center;
      user-select:none;
      gap: 10px;
    }
    .more-item:hover{ background: rgba(120,113,108,.08); }
    .more-left{ display:flex; align-items:center; gap:10px; }
    .more-left svg{ width:14px; height:14px; }
    .more-right{ color:#888; font-size:11px; letter-spacing:.12em; }
    @media (max-width: 420px){
      .more-menu{ right: 0; top: 50px; }
      .more-item{ padding: 10px; }
    }


    @media (max-width: 420px){
      .desktop-icons{ display:none !important; }
      .mobile-more{ display:flex !important; }
    }
    @media (min-width: 421px){
      .desktop-icons{ display:flex !important; }
      .mobile-more{ display:none !important; }
    }


    /* Breathing modal */
    .breath-overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.25);
      backdrop-filter: blur(2px);
      z-index: 200;
      display:flex; align-items:center; justify-content:center;
    }
    .breath-modal{
      background:#FFFDF7;
      border-radius:24px;
      padding:24px;
      width:min(360px, 92vw);
      text-align:center;
      box-shadow:0 18px 40px rgba(0,0,0,.2);
    }
    .breath-title{
      font-size:16px;
      letter-spacing:.18em;
      color:#333;
      margin-bottom:8px;
    }
    .breath-sub{
      font-size:13px;
      color:#777;
      margin-bottom:18px;
    }
    .breath-circle{
      width:140px; height:140px;
      margin:0 auto 18px;
      border-radius:50%;
      background: rgba(120,113,108,.15);
      display:flex; align-items:center; justify-content:center;
      font-size:14px; color:#444;
      animation: breathe 14s ease-in-out infinite;
    }
    @keyframes breathe{
  /* 4â€“4â€“6 (14s) */
  0%   { transform: scale(.85); }
  28.57% { transform: scale(1); }   /* inhale */
  57.14% { transform: scale(1); }   /* hold */
  100% { transform: scale(.85); }   /* exhale back */
}
      30%  { transform: scale(1); }   /* inhale 4s */
      60%  { transform: scale(1); }   /* hold 4s */
      100% { transform: scale(.85); } /* exhale 6s */
    }
    .breath-actions{
      display:flex; gap:10px; justify-content:center;
    }


.onboard-overlay{position:fixed;inset:0;background:rgba(0,0,0,.28);backdrop-filter:blur(3px);z-index:300;display:flex;align-items:center;justify-content:center;padding:20px;}
.onboard-card{width:min(420px,92vw);background:rgba(255,255,255,.94);border:1px solid rgba(120,113,108,.18);border-radius:22px;box-shadow:0 18px 44px rgba(0,0,0,.22);padding:22px;text-align:center;}
.onboard-title{font-size:16px;letter-spacing:.18em;font-weight:800;color:#222;margin-bottom:10px;}
.onboard-copy{font-size:13px;color:#666;line-height:1.7;margin-bottom:14px;}
.onboard-steps{text-align:left;background:rgba(242,240,235,.7);border:1px solid rgba(120,113,108,.12);border-radius:16px;padding:12px;margin:14px 0 16px;font-size:13px;color:#333;line-height:1.7;}
.onboard-step{display:flex;gap:10px;padding:6px 4px;}
.onboard-num{width:18px;font-weight:900;color:#555;}

</style>
</head>
<body>
  <div id="root"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>

  <script>
    const e = React.createElement;
    const useState = React.useState;
    const useEffect = React.useEffect;
const useRef = React.useRef;

    const GOOGLE_SHEET_CSV_URL = "";
    const UI_TEXT = {
      "zh-TW": {
        appTitle: "å–µï½æ™‚åˆ»",
        appSubtitle: "çµ¦å¿™ç¢Œå¿ƒéˆçš„ 3 åˆ†é˜è²“èªéŒ„",
        stateTitle: "ç¾åœ¨çš„ç‹€æ…‹â€¦",
        stateSubtitle: "å…ˆé¸æ“‡ä½ ç¾åœ¨çš„ç‹€æ…‹ï¼Œè²“æœƒé™ªä½ èµ°ä¸‹ä¸€æ­¥ã€‚",
        dataSource: "è³‡æ–™ä¾†æºï¼š",
        dsSheet: "Google Sheet",
        dsFallback: "å…§å»ºå‚™æ´",
        todayQuote: "ä»Šæ—¥è²“èª",
        pickCat: "é¸ä¸€éš»è²“ï¼Œé ˜å–è™•æ–¹ã€‚",
        masterRx: "è²“å¤§å¸«ç”Ÿæ´»ç§˜æ–¹",
        rxMissing: "ï¼ˆæ­¤å‰‡è™•æ–¹å°šæœªè¨­å®šè¡Œå‹•å»ºè­°ï¼‰",
        again: "å†ä¾†ä¸€å¸–",
        changeState: "æ›å€‹ç‹€æ…‹",
        favorites: "æ”¶è—",
        favEmpty: "å°šæœªæ”¶è—ä»»ä½•éˆæ„Ÿ",
        copied: "å·²è¤‡è£½ (å«é€£çµ)",
        copyFail: "è¤‡è£½å¤±æ•—",
        removed: "å·²ç§»é™¤æ”¶è—",
        saved: "å·²æ”¶è—",
        close: "é—œé–‰",
        remove: "ç§»é™¤",
        copy: "è¤‡è£½",
        lang: "èªè¨€"
      },
      "zh-CN": {
        appTitle: "å–µï½æ—¶åˆ»",
        appSubtitle: "ç»™å¿™ç¢Œå¿ƒçµçš„ 3 åˆ†é’ŸçŒ«è¯­å½•",
        stateTitle: "ç°åœ¨çš„çŠ¶æ€â€¦",
        stateSubtitle: "å…ˆé€‰æ‹©ä½ ç°åœ¨çš„çŠ¶æ€ï¼ŒçŒ«ä¼šé™ªä½ èµ°ä¸‹ä¸€æ­¥ã€‚",
        dataSource: "æ•°æ®æ¥æºï¼š",
        dsSheet: "Google Sheet",
        dsFallback: "å†…å»ºå¤‡æ´",
        todayQuote: "ä»Šæ—¥çŒ«è¯­",
        pickCat: "é€‰ä¸€åªçŒ«ï¼Œé¢†å–å¤„æ–¹ã€‚",
        masterRx: "çŒ«å¤§å¸ˆç”Ÿæ´»ç§˜æ–¹",
        rxMissing: "ï¼ˆæ­¤åˆ™å¤„æ–¹å°šæœªè®¾å®šè¡ŒåŠ¨å»ºè®®ï¼‰",
        again: "å†æ¥ä¸€å¸–",
        changeState: "æ¢ä¸ªçŠ¶æ€",
        favorites: "æ”¶è—",
        favEmpty: "å°šæœªæ”¶è—ä»»ä½•çµæ„Ÿ",
        copied: "å·²å¤åˆ¶ï¼ˆå«é“¾æ¥ï¼‰",
        copyFail: "å¤åˆ¶å¤±è´¥",
        removed: "å·²ç§»é™¤æ”¶è—",
        saved: "å·²æ”¶è—",
        close: "å…³é—­",
        remove: "ç§»é™¤",
        copy: "å¤åˆ¶",
        lang: "è¯­è¨€"
      },
      "en": {
        appTitle: "Meow~ Moment",
        appSubtitle: "3-minute cat quotes for busy minds",
        stateTitle: "Current moodâ€¦",
        stateSubtitle: "Pick your mood. The cat will guide your next step.",
        dataSource: "Source:",
        dsSheet: "Google Sheet",
        dsFallback: "Built-in fallback",
        todayQuote: "Todayâ€™s Meow",
        pickCat: "Pick a cat to receive your prescription.",
        masterRx: "Cat Master Recipe",
        rxMissing: "(No prescription action set yet)",
        again: "One more",
        changeState: "Change mood",
        favorites: "Saved",
        favEmpty: "No saved wisdom yet",
        copied: "Copied (with footer)",
        copyFail: "Copy failed",
        removed: "Removed",
        saved: "Saved",
        close: "Close",
        remove: "Remove",
        copy: "Copy",
        lang: "Language"
      }
    };
 // Phase F: å…ˆé ç•™ï¼ˆä¹‹å¾Œè²¼ä¸Š export?format=csvï¼‰

    const STATES = [
      { id:"start",    label:{'zh-TW':"æ™¨é–“æº–å‚™",'zh-CN':"æ™¨é—´å‡†å¤‡",'en':"Morning"}, icon:"â˜•" },
      { id:"conflict", label:{'zh-TW':"é˜²ç¦¦å¥§å®¢",'zh-CN':"é˜²å¾¡å®¢æˆ·",'en':"Defend"}, icon:"ğŸ›¡ï¸" },
      { id:"win",      label:{'zh-TW':"é”æˆæˆå°±",'zh-CN':"è¾¾æˆæˆå°±",'en':"Achieve"}, icon:"ğŸ”ï¸" },
      { id:"tired",    label:{'zh-TW':"è·æ¥­å€¦æ€ ",'zh-CN':"èŒä¸šå€¦æ€ ",'en':"Burnout"}, icon:"â˜ï¸" },
      { id:"push",     label:{'zh-TW':"å°ˆæ³¨è¡åˆº",'zh-CN':"ä¸“æ³¨å†²åˆº",'en':"Focus"}, icon:"âš¡" }
    ];

    const FALLBACK_QUOTES = {
      start: [{ main:{"zh-TW": "æ…¢æ…¢é†’ä¾†ï¼Œä¸–ç•Œä¸æœƒè·‘æ‰ã€‚", "zh-CN": "æ…¢æ…¢é†’æ¥ï¼Œä¸–ç•Œä¸ä¼šè·‘æ‰ã€‚", "en": "Wake slowly. The world wonâ€™t run away."}, action:{"zh-TW": "å…ˆå–æ°´ï¼Œå†ä¼¸å±•ä¸€ä¸‹ä½ çš„çˆªå­ï¼ˆæ‰‹æŒ‡ï¼‰ã€‚", "zh-CN": "å…ˆå–æ°´ï¼Œå†ä¼¸å±•ä¸€ä¸‹ä½ çš„çˆªå­ï¼ˆæ‰‹æŒ‡ï¼‰ã€‚", "en": "Drink water, then stretch your paws (fingers)."}, author:{"zh-TW": "è³´åºŠè²“", "zh-CN": "èµ–åºŠçŒ«", "en": "Snooze Cat"} },
        { main:{"zh-TW": "å…ˆåƒæ—©é¤ï¼Œå†è«‡çµ±æ²»ä¸–ç•Œã€‚", "zh-CN": "å…ˆåƒæ—©é¤ï¼Œå†è°ˆç»Ÿæ²»ä¸–ç•Œã€‚", "en": "Breakfast first. Then world domination."}, action:{"zh-TW": "åƒé»æ±è¥¿ï¼Œè®“å¤§è…¦å…ˆä¸Šç·šã€‚", "zh-CN": "åƒç‚¹ä¸œè¥¿ï¼Œè®©å¤§è„‘å…ˆä¸Šçº¿ã€‚", "en": "Eat something. Let your brain boot up."}, author:{"zh-TW": "ç©ºç¢—æŠ—è­°è€…", "zh-CN": "ç©ºç¢—æŠ—è®®è€…", "en": "Empty Bowl Protester"} },
        { main:{"zh-TW": "ä¼¸æ‡¶è…°è¦åƒåŸæœ¬æœ‰å…©å…¬å°ºé•·é‚£æ¨£ã€‚", "zh-CN": "ä¼¸æ‡’è…°è¦åƒåŸæœ¬æœ‰ä¸¤å…¬å°ºé•¿é‚£æ ·ã€‚", "en": "Stretch like youâ€™re two meters long."}, action:{"zh-TW": "æŠ¬æ‰‹æ‹‰é•·è„Šæ¤ 20 ç§’ã€‚", "zh-CN": "æŠ¬æ‰‹æ‹‰é•¿è„Šæ¤ 20 ç§’ã€‚", "en": "Reach up and lengthen your spine for 20 seconds."}, author:{"zh-TW": "ç‘œçˆè™æ–‘", "zh-CN": "ç‘œçˆè™æ–‘", "en": "Yoga Tabby"} },
        { main:{"zh-TW": "é™½å…‰æ˜¯å…è²»è¡Œå‹•é›»æºï¼Œä¸ç”¨ç™½ä¸ç”¨ã€‚", "zh-CN": "é˜³å…‰æ˜¯å…è´¹è¡ŒåŠ¨ç”µæºï¼Œä¸ç”¨ç™½ä¸ç”¨ã€‚", "en": "Sunlight is free energyâ€”use it."}, action:{"zh-TW": "æ‰¾ä¸€æŸå…‰ï¼Œè‡‰æ¹Šéå»æ›¬ 30 ç§’ã€‚", "zh-CN": "æ‰¾ä¸€æŸå…‰ï¼Œè„¸å‡‘è¿‡å»æ™’ 30 ç§’ã€‚", "en": "Find a sunbeam. Put your face in it for 30 seconds."}, author:{"zh-TW": "çª—é‚Šå…‰åˆä½œç”¨è€…", "zh-CN": "çª—è¾¹å…‰åˆä½œç”¨è€…", "en": "Photosynthesizer"} },
        { main:{"zh-TW": "æ•´ç†å„€å®¹ä¸æ˜¯ç‚ºäº†åˆ¥äººï¼Œæ˜¯ç‚ºäº†æˆ°é¬¥åŠ›ã€‚", "zh-CN": "æ•´ç†ä»ªå®¹ä¸æ˜¯ä¸ºäº†åˆ«äººï¼Œæ˜¯ä¸ºäº†æˆ˜æ–—åŠ›ã€‚", "en": "Grooming isnâ€™t for others. Itâ€™s for power."}, action:{"zh-TW": "æ´—æŠŠè‡‰ï¼Œè®“ç²¾ç¥å›ä¾†ã€‚", "zh-CN": "æ´—æŠŠè„¸ï¼Œè®©ç²¾ç¥å›æ¥ã€‚", "en": "Wash your face. Get your edge back."}, author:{"zh-TW": "æ½”ç™–ä¸‰èŠ±", "zh-CN": "æ´ç™–ä¸‰èŠ±", "en": "Clean Calico"} },
        { main:{"zh-TW": "å–æ°´ã€‚ä½ ä¸æ˜¯ä»™äººæŒã€‚", "zh-CN": "å–æ°´ã€‚ä½ ä¸æ˜¯ä»™äººæŒã€‚", "en": "Hydrate. Youâ€™re not a cactus."}, action:{"zh-TW": "ç«‹åˆ»å–ä¸€å¤§æ¯æ°´ã€‚", "zh-CN": "ç«‹åˆ»å–ä¸€å¤§æ¯æ°´ã€‚", "en": "Drink a big glass of water now."}, author:{"zh-TW": "ç›†æ ½ç ´å£è€…", "zh-CN": "ç›†æ ½ç ´åè€…", "en": "Plant Destroyer"} },
        { main:{"zh-TW": "é¬§é˜åªæ˜¯å»ºè­°ï¼Œä¸æ˜¯å‘½ä»¤ã€‚", "zh-CN": "é—¹é’Ÿåªæ˜¯å»ºè®®ï¼Œä¸æ˜¯å‘½ä»¤ã€‚", "en": "The alarm is a suggestion, not an order."}, action:{"zh-TW": "å…è¨±è‡ªå·±å¤šè³´åºŠ 5 åˆ†é˜ã€‚", "zh-CN": "å…è®¸è‡ªå·±å¤šèµ–åºŠ 5 åˆ†é’Ÿã€‚", "en": "Allow one extra 5-minute snooze."}, author:{"zh-TW": "æŒ‰æ‰é¬§é˜çš„æ‰‹", "zh-CN": "æŒ‰æ‰é—¹é’Ÿçš„æ‰‹", "en": "Snooze Button Paw"} },
        { main:{"zh-TW": "å°¾å·´ç¿¹é«˜ï¼Œè‡ªä¿¡å°±ä¾†äº†ã€‚", "zh-CN": "å°¾å·´ç¿˜é«˜ï¼Œè‡ªä¿¡å°±æ¥äº†ã€‚", "en": "Tail up, confidence up."}, action:{"zh-TW": "ç«™èµ·ä¾†ï¼Œè‚©è†€æ‰“é–‹ï¼Œèµ°å…©æ­¥ã€‚", "zh-CN": "ç«™èµ·æ¥ï¼Œè‚©è†€æ‰“å¼€ï¼Œèµ°ä¸¤æ­¥ã€‚", "en": "Stand up. Open your shoulders. Take two steps."}, author:{"zh-TW": "ç¤¾äº¤åæµè²“", "zh-CN": "ç¤¾äº¤åæµçŒ«", "en": "Socialite Cat"} },
        { main:{"zh-TW": "å…ˆèä¸€èç©ºæ°£çš„å‘³é“ï¼Œå†å‡ºé–€ã€‚", "zh-CN": "å…ˆé—»ä¸€é—»ç©ºæ°”çš„å‘³é“ï¼Œå†å‡ºé—¨ã€‚", "en": "Sniff the air before you launch."}, action:{"zh-TW": "æ·±å‘¼å¸ä¸‰æ¬¡ï¼Œè§€å¯Ÿä»Šå¤©çš„ç¯€å¥ã€‚", "zh-CN": "æ·±å‘¼å¸ä¸‰æ¬¡ï¼Œè§‚å¯Ÿä»Šå¤©çš„èŠ‚å¥ã€‚", "en": "Take 3 deep breaths. Notice todayâ€™s pace."}, author:{"zh-TW": "å“ç®¡å“¡", "zh-CN": "å“ç®¡å‘˜", "en": "Quality Control"} },
        { main:{"zh-TW": "ç›¯è‘—è™›ç©ºç™¼å‘†ï¼Œæ˜¯æ¥æ”¶å®‡å®™è¨Šè™Ÿã€‚", "zh-CN": "ç›¯ç€è™šç©ºå‘å‘†ï¼Œæ˜¯æ¥æ”¶å®‡å®™è®¯å·ã€‚", "en": "Staring into the void downloads signals."}, action:{"zh-TW": "å…©åˆ†é˜ä¸çœ‹æ‰‹æ©Ÿï¼Œå®Œå…¨æ”¾ç©ºã€‚", "zh-CN": "ä¸¤åˆ†é’Ÿä¸çœ‹æ‰‹æœºï¼Œå®Œå…¨æ”¾ç©ºã€‚", "en": "2 minutes. No phone. Pure nothing."}, author:{"zh-TW": "é€šéˆè²“è²“", "zh-CN": "é€šçµçŒ«çŒ«", "en": "Psychic Cat"} }],
      conflict: [{ main:{"zh-TW": "ä¸æ˜¯ä½ çš„è²“ç ‚ç›†ï¼Œå°±åˆ¥éŸã€‚", "zh-CN": "ä¸æ˜¯ä½ çš„çŒ«ç ‚ç›†ï¼Œå°±åˆ«é“²ã€‚", "en": "Not your litter box. Donâ€™t scoop it."}, action:{"zh-TW": "å…ˆå•ï¼šé€™çœŸçš„æ˜¯æˆ‘çš„è²¬ä»»å—ï¼Ÿ", "zh-CN": "å…ˆé—®ï¼šè¿™çœŸçš„æ˜¯æˆ‘çš„è´£ä»»å—ï¼Ÿ", "en": "Ask: is this actually mine to own?"}, author:{"zh-TW": "è·¯éçš„è²“", "zh-CN": "è·¯è¿‡çš„çŒ«", "en": "Passing Cat"} },
        { main:{"zh-TW": "æ²‰é»˜ä¸æ˜¯è»Ÿå¼±ï¼Œæ˜¯æœ€é«˜ç´šçš„é„™è¦–ã€‚", "zh-CN": "æ²‰é»˜ä¸æ˜¯è½¯å¼±ï¼Œæ˜¯æœ€é«˜çº§çš„é„™è§†ã€‚", "en": "Silence isnâ€™t weakness. Itâ€™s dismissal."}, action:{"zh-TW": "å…ˆåœ 10 ç§’å†å›ã€‚", "zh-CN": "å…ˆåœ 10 ç§’å†å›ã€‚", "en": "Wait 10 seconds before replying."}, author:{"zh-TW": "å·²è®€ä¸å›çš„æ™ºæ…§", "zh-CN": "å·²è¯»ä¸å›çš„æ™ºæ…§", "en": "Left on Read"} },
        { main:{"zh-TW": "ç¦®è²Œåœ°èªªã€ä¸ã€ï¼Œå¾ˆå¸¥ã€‚", "zh-CN": "ç¤¼è²Œåœ°è¯´ã€ä¸ã€ï¼Œå¾ˆå¸…ã€‚", "en": "A polite â€˜noâ€™ is powerful."}, action:{"zh-TW": "ç”¨ä¸€å¥è©±è¨­ç•Œç·šï¼šæˆ‘ç¾åœ¨ä¸æ–¹ä¾¿ã€‚", "zh-CN": "ç”¨ä¸€å¥è¯è®¾ç•Œçº¿ï¼šæˆ‘ç°åœ¨ä¸æ–¹ä¾¿ã€‚", "en": "Set a boundary: â€˜I canâ€™t do that right now.â€™"}, author:{"zh-TW": "å…‡çŒ›å°è²“", "zh-CN": "å‡¶çŒ›å°çŒ«", "en": "Feisty Kitten"} },
        { main:{"zh-TW": "ä¸æƒ³è½ï¼Œå°±ç•™çµ¦å°æ–¹ä¸€å€‹å„ªé›…çš„å±è‚¡ã€‚", "zh-CN": "ä¸æƒ³å¬ï¼Œå°±ç•™ç»™å¯¹æ–¹ä¸€ä¸ªä¼˜é›…çš„å±è‚¡ã€‚", "en": "If needed, give them the tail."}, action:{"zh-TW": "æŠŠè¦–çª—ç¸®å°ï¼Œå…ˆå»å€’æ¯æ°´ã€‚", "zh-CN": "æŠŠè§†çª—ç¼©å°ï¼Œå…ˆå»å€’æ¯æ°´ã€‚", "en": "Minimize the window. Get water."}, author:{"zh-TW": "èƒŒå½±æ®ºæ‰‹", "zh-CN": "èƒŒå½±æ€æ‰‹", "en": "Cold Shoulder"} },
        { main:{"zh-TW": "è€³æœµé£›æ©Ÿè€³æ˜¯æœ€å¾Œè­¦å‘Šã€‚", "zh-CN": "è€³æœµé£æœºè€³æ˜¯æœ€åè­¦å‘Šã€‚", "en": "Ear flick is the final warning."}, action:{"zh-TW": "èªªï¼šæˆ‘ç¨å¾Œå›è¦†ï¼Œå…ˆé€€å‡ºæˆ°å ´ã€‚", "zh-CN": "è¯´ï¼šæˆ‘ç¨åå›å¤ï¼Œå…ˆé€€å‡ºæˆ˜åœºã€‚", "en": "Say â€˜Iâ€™ll reply laterâ€™ and exit the battlefield."}, author:{"zh-TW": "ä¸è€ç…©çš„è€³æœµ", "zh-CN": "ä¸è€çƒ¦çš„è€³æœµ", "en": "Flicking Ears"} },
        { main:{"zh-TW": "çˆªå­ä¸ç”¨ä¼¸å‡ºä¾†ï¼Œä½†è¦è®“äººçŸ¥é“ä½ æœ‰ã€‚", "zh-CN": "çˆªå­ä¸ç”¨ä¼¸å‡ºæ¥ï¼Œä½†è¦è®©äººçŸ¥é“ä½ æœ‰ã€‚", "en": "Keep claws sheathed, but known."}, action:{"zh-TW": "æŠŠè¦å‰‡èªªæ¸…æ¥šä¸€æ¬¡å°±å¥½ã€‚", "zh-CN": "æŠŠè§„åˆ™è¯´æ¸…æ¥šä¸€æ¬¡å°±å¥½ã€‚", "en": "State the rule once, clearly."}, author:{"zh-TW": "é‡‘é‹¼ç‹¼è²“", "zh-CN": "é‡‘é’¢ç‹¼çŒ«", "en": "Wolverine Cat"} },
        { main:{"zh-TW": "æ…¢æ…¢çœ¨çœ¼ï¼Œæ˜¯ç„¡è²å¯©åˆ¤ã€‚", "zh-CN": "æ…¢æ…¢çœ¨çœ¼ï¼Œæ˜¯æ— å£°å®¡åˆ¤ã€‚", "en": "Slow blink: silent judgment."}, action:{"zh-TW": "æ…¢çœ¨ä¸‰æ¬¡ï¼Œè®“æƒ…ç·’é™æº«ã€‚", "zh-CN": "æ…¢çœ¨ä¸‰æ¬¡ï¼Œè®©æƒ…ç»ªé™æ¸©ã€‚", "en": "Slow blink 3 times to cool down."}, author:{"zh-TW": "çœ¼ç¥è£åˆ¤", "zh-CN": "çœ¼ç¥è£åˆ¤", "en": "Judgey Eyes"} },
        { main:{"zh-TW": "èˆ‡å…¶çˆ­ï¼Œä¸å¦‚å•ï¼šé‡é»æ˜¯ä»€éº¼ï¼Ÿ", "zh-CN": "ä¸å…¶äº‰ï¼Œä¸å¦‚é—®ï¼šé‡ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ", "en": "Instead of arguing, ask: whatâ€™s the point?"}, action:{"zh-TW": "æŠŠå°è©±æ‹‰å›ç›®æ¨™ï¼šæˆ‘å€‘è¦è§£æ±ºä»€éº¼ï¼Ÿ", "zh-CN": "æŠŠå¯¹è¯æ‹‰å›ç›®æ ‡ï¼šæˆ‘ä»¬è¦è§£å†³ä»€ä¹ˆï¼Ÿ", "en": "Refocus: what are we solving?"}, author:{"zh-TW": "è½‰ç§»è©±é¡Œå¤§å¸«", "zh-CN": "è½¬ç§»è¯é¢˜å¤§å¸ˆ", "en": "Distractor"} },
        { main:{"zh-TW": "å™ªéŸ³ä¾†äº†ï¼Œå°±æˆ´ä¸Šè€³æ©Ÿã€‚", "zh-CN": "å™ªéŸ³æ¥äº†ï¼Œå°±æˆ´ä¸Šè€³æœºã€‚", "en": "When the noise hits, put on headphones."}, action:{"zh-TW": "æ’­æ”¾ç™½å™ªéŸ³ 5 åˆ†é˜ã€‚", "zh-CN": "æ’­æ”¾ç™½å™ªéŸ³ 5 åˆ†é’Ÿã€‚", "en": "Play white noise for 5 minutes."}, author:{"zh-TW": "å¸å¡µå™¨ææ‡¼ç—‡", "zh-CN": "å¸å°˜å™¨ææƒ§ç—‡", "en": "Vacuum Hater"} },
        { main:{"zh-TW": "ä½ æœ‰ä¹æ¢å‘½ï¼Œä½†è€å¿ƒä¸ç”¨å…¨èŠ±åœ¨é€™è£¡ã€‚", "zh-CN": "ä½ æœ‰ä¹æ¡å‘½ï¼Œä½†è€å¿ƒä¸ç”¨å…¨èŠ±åœ¨è¿™é‡Œã€‚", "en": "Nine lives. Donâ€™t spend your patience here."}, action:{"zh-TW": "çµæŸç„¡æ•ˆçˆ­è«–ï¼šå…ˆåˆ°æ­¤ç‚ºæ­¢ã€‚", "zh-CN": "ç»“æŸæ— æ•ˆäº‰è®ºï¼šå…ˆåˆ°æ­¤ä¸ºæ­¢ã€‚", "en": "End the loop: â€˜Letâ€™s pause here.â€™"}, author:{"zh-TW": "ä¸è€ç…©å¤§ç‹", "zh-CN": "ä¸è€çƒ¦å¤§ç‹", "en": "Impatient One"} }],
      win: [{ main:{"zh-TW": "åšåˆ°äº†å°±è©²èª‡è‡ªå·±ã€‚", "zh-CN": "åšåˆ°äº†å°±è¯¥å¤¸è‡ªå·±ã€‚", "en": "You did it. Give yourself credit."}, action:{"zh-TW": "åœ 10 ç§’çœ‹æˆæœï¼Œå†å¾€ä¸‹èµ°ã€‚", "zh-CN": "åœ 10 ç§’çœ‹æˆæœï¼Œå†å¾€ä¸‹èµ°ã€‚", "en": "Pause 10 seconds to appreciate, then continue."}, author:{"zh-TW": "ç‹©çµä¹‹ç¥", "zh-CN": "ç‹©çŒä¹‹ç¥", "en": "Hunter God"} },
        { main:{"zh-TW": "å‹åˆ©åƒé®ªé­šç½é ­ä¸€æ¨£é¦™ã€‚", "zh-CN": "èƒœåˆ©åƒé²”é±¼ç½å¤´ä¸€æ ·é¦™ã€‚", "en": "Victory smells like fresh tuna."}, action:{"zh-TW": "çå‹µè‡ªå·±ä¸€å€‹å°é»å¿ƒã€‚", "zh-CN": "å¥–åŠ±è‡ªå·±ä¸€ä¸ªå°ç‚¹å¿ƒã€‚", "en": "Give yourself a small treat."}, author:{"zh-TW": "ç½ç½å“é‘‘å¸«", "zh-CN": "ç½ç½å“é‰´å¸ˆ", "en": "Food Critic"} },
        { main:{"zh-TW": "æŠŠå‘¼åš•é–‹åˆ°æœ€å¤§ï¼Œè®“ä¸–ç•ŒçŸ¥é“ä½ çˆ½ã€‚", "zh-CN": "æŠŠå‘¼å™œå¼€åˆ°æœ€å¤§ï¼Œè®©ä¸–ç•ŒçŸ¥é“ä½ çˆ½ã€‚", "en": "Turn purr to max. Let it be known."}, action:{"zh-TW": "è·Ÿä¸€å€‹äººåˆ†äº«ä½ çš„å¥½æ¶ˆæ¯ã€‚", "zh-CN": "è·Ÿä¸€ä¸ªäººåˆ†äº«ä½ çš„å¥½æ¶ˆæ¯ã€‚", "en": "Share the win with one person."}, author:{"zh-TW": "å‘¼åš•ç™¼å‹•æ©Ÿ", "zh-CN": "å‘¼å™œå‘åŠ¨æœº", "en": "Purr Engine"} },
        { main:{"zh-TW": "è½åœ°è¦å„ªé›…ã€‚", "zh-CN": "è½åœ°è¦ä¼˜é›…ã€‚", "en": "Land it elegantly."}, action:{"zh-TW": "æŠŠæª”æ¡ˆå­˜å¥½ã€é—œæ‰å¤šé¤˜è¦–çª—ã€‚", "zh-CN": "æŠŠæ¡£æ¡ˆå­˜å¥½ã€å…³æ‰å¤šä½™è§†çª—ã€‚", "en": "Save files. Close extra tabs."}, author:{"zh-TW": "é«”æ“é¸æ‰‹", "zh-CN": "ä½“æ“é€‰æ‰‹", "en": "Gymnast"} },
        { main:{"zh-TW": "éœ²è‚šå­æ˜¯æœ€é«˜ç´šæ”¾é¬†ã€‚", "zh-CN": "éœ²è‚šå­æ˜¯æœ€é«˜çº§æ”¾æ¾ã€‚", "en": "Belly up is peak relaxation."}, action:{"zh-TW": "æŠŠè‚©è†€æ”¾ä¸‹ä¾†ï¼Œåä¸€å£æ°£ã€‚", "zh-CN": "æŠŠè‚©è†€æ”¾ä¸‹æ¥ï¼Œåä¸€å£æ°”ã€‚", "en": "Drop your shoulders. Exhale."}, author:{"zh-TW": "ç¿»è‚šè²“", "zh-CN": "ç¿»è‚šçŒ«", "en": "Belly Up"} },
        { main:{"zh-TW": "æ“ŠæŒï¼è‚‰çƒåœ¨æ­¤ã€‚", "zh-CN": "å‡»æŒï¼è‚‰çƒåœ¨æ­¤ã€‚", "en": "High fiveâ€”paws up."}, action:{"zh-TW": "è‡ªå·±æ‹æ‰‹ä¸€ä¸‹ï¼Œæ¨™è¨˜å®Œæˆã€‚", "zh-CN": "è‡ªå·±æ‹æ‰‹ä¸€ä¸‹ï¼Œæ ‡è®°å®Œæˆã€‚", "en": "Clap once to mark â€˜done.â€™"}, author:{"zh-TW": "æ“ŠæŒè²“", "zh-CN": "å‡»æŒçŒ«", "en": "High Five Cat"} },
        { main:{"zh-TW": "å“è³ªæ˜¯æ²’äººçœ‹ä¹ŸæŠŠè²“ç ‚è“‹å¥½ã€‚", "zh-CN": "å“è´¨æ˜¯æ²¡äººçœ‹ä¹ŸæŠŠçŒ«ç ‚ç›–å¥½ã€‚", "en": "Quality is covering the litter even unseen."}, action:{"zh-TW": "æœ€å¾Œæª¢æŸ¥ä¸€æ¬¡ï¼Œå„ªé›…é€å‡ºã€‚", "zh-CN": "æœ€åæ£€æŸ¥ä¸€æ¬¡ï¼Œä¼˜é›…é€å‡ºã€‚", "en": "Do one final check. Send with style."}, author:{"zh-TW": "è²“ç ‚ç›†çš„å®ˆè­·è€…", "zh-CN": "çŒ«ç ‚ç›†çš„å®ˆæŠ¤è€…", "en": "Litter Guardian"} },
        { main:{"zh-TW": "ä¸è·Ÿåˆ¥äººæ¯”ï¼Œä½ è‡ªå·±çŸ¥é“å°±è¡Œã€‚", "zh-CN": "ä¸è·Ÿåˆ«äººæ¯”ï¼Œä½ è‡ªå·±çŸ¥é“å°±è¡Œã€‚", "en": "No comparison needed. You know."}, action:{"zh-TW": "é—œæ‰ç¤¾ç¾¤ 10 åˆ†é˜ï¼Œäº«å—æˆæœã€‚", "zh-CN": "å…³æ‰ç¤¾ç¾¤ 10 åˆ†é’Ÿï¼Œäº«å—æˆæœã€‚", "en": "Close social for 10 mins. Enjoy the result."}, author:{"zh-TW": "æ·¡å®šè²“", "zh-CN": "æ·¡å®šçŒ«", "en": "Zen Cat"} },
        { main:{"zh-TW": "æŠŠå°¾å·´åœå¥½ï¼Œå®Œç¾æ”¶å°¾ã€‚", "zh-CN": "æŠŠå°¾å·´å›´å¥½ï¼Œå®Œç¾æ”¶å°¾ã€‚", "en": "Tail wrapâ€”perfect finish."}, action:{"zh-TW": "æ•´ç†æ¡Œé¢ 1 åˆ†é˜ï¼Œæ”¶å·¥ã€‚", "zh-CN": "æ•´ç†æ¡Œé¢ 1 åˆ†é’Ÿï¼Œæ”¶å·¥ã€‚", "en": "Tidy for 1 minute. Wrap up."}, author:{"zh-TW": "å„ªé›…åå§¿", "zh-CN": "ä¼˜é›…åå§¿", "en": "Elegant Sit"} },
        { main:{"zh-TW": "è´äº†ä¹‹å¾Œï¼Ÿç•¶ç„¶æ˜¯ç¡ã€‚", "zh-CN": "èµ¢äº†ä¹‹åï¼Ÿå½“ç„¶æ˜¯ç¡ã€‚", "en": "After winning? Obviously, nap."}, action:{"zh-TW": "å®‰æ’ä»Šå¤©æœ€æ—©èƒ½ç¡çš„æ™‚é–“ã€‚", "zh-CN": "å®‰æ’ä»Šå¤©æœ€æ—©èƒ½ç¡çš„æ—¶é—´ã€‚", "en": "Set the earliest bedtime you can."}, author:{"zh-TW": "å† è»ç¡ç¥", "zh-CN": "å† å†›ç¡ç¥", "en": "Champion Sleeper"} }],
      tired: [{ main:{"zh-TW": "ä¼‘æ¯ä¸æ˜¯å·æ‡¶ï¼Œæ˜¯å¿…è¦ç¶­ä¿®ã€‚", "zh-CN": "ä¼‘æ¯ä¸æ˜¯å·æ‡’ï¼Œæ˜¯å¿…è¦ç»´ä¿®ã€‚", "en": "Rest isnâ€™t laziness. Itâ€™s maintenance."}, action:{"zh-TW": "æ‰‹æ©Ÿè¢å¹•æœä¸‹ï¼Œé–‰çœ¼ 3 åˆ†é˜ã€‚", "zh-CN": "æ‰‹æœºå±å¹•æœä¸‹ï¼Œé—­çœ¼ 3 åˆ†é’Ÿã€‚", "en": "Flip phone down. Close eyes for 3 minutes."}, author:{"zh-TW": "æ²’é›»çš„è²“", "zh-CN": "æ²¡ç”µçš„çŒ«", "en": "Low Battery Cat"} },
        { main:{"zh-TW": "ä»Šå¤©åˆ‡æ›æˆ 0.5 å€é€Ÿã€‚", "zh-CN": "ä»Šå¤©åˆ‡æ¢æˆ 0.5 å€é€Ÿã€‚", "en": "Today runs at 0.5x speed."}, action:{"zh-TW": "èµ°æ…¢ä¸€é»ã€æ‰“å­—æ…¢ä¸€é»ã€‚", "zh-CN": "èµ°æ…¢ä¸€ç‚¹ã€æ‰“å­—æ…¢ä¸€ç‚¹ã€‚", "en": "Walk slower. Type slower."}, author:{"zh-TW": "æ¨¹æ‡¶è²“", "zh-CN": "æ ‘æ‡’çŒ«", "en": "Sloth Cat"} },
        { main:{"zh-TW": "ä½ å¯ä»¥æ¶²é«”åŒ– 5 åˆ†é˜ã€‚", "zh-CN": "ä½ å¯ä»¥æ¶²ä½“åŒ– 5 åˆ†é’Ÿã€‚", "en": "You may go liquid for 5 minutes."}, action:{"zh-TW": "æŠŠèº«é«”æ”¾é¬†ï¼Œé è‘—æ¤…èƒŒã€‚", "zh-CN": "æŠŠèº«ä½“æ”¾æ¾ï¼Œé ç€æ¤…èƒŒã€‚", "en": "Let your body melt into the chair."}, author:{"zh-TW": "è»Ÿçˆ›çš„æ²™ç™¼", "zh-CN": "è½¯çƒ‚çš„æ²™å‘", "en": "Mushy Sofa"} },
        { main:{"zh-TW": "è«‹å‹¿æ‹æ‰“é¤µé£Ÿã€‚", "zh-CN": "è¯·å‹¿æ‹æ‰“å–‚é£Ÿã€‚", "en": "Do not disturb."}, action:{"zh-TW": "é–‹å•Ÿå‹¿æ“¾ 20 åˆ†é˜ã€‚", "zh-CN": "å¼€å¯å‹¿æ‰° 20 åˆ†é’Ÿã€‚", "en": "Turn on DND for 20 minutes."}, author:{"zh-TW": "å‹¿æ“¾æ¨¡å¼", "zh-CN": "å‹¿æ‰°æ¨¡å¼", "en": "DND Mode"} },
        { main:{"zh-TW": "èº²é€²è§’è½ä¹Ÿç®—è‡ªæ•‘ã€‚", "zh-CN": "èº²è¿›è§’è½ä¹Ÿç®—è‡ªæ•‘ã€‚", "en": "Hiding counts as self-care."}, action:{"zh-TW": "æ‰¾å€‹å®‰éœè§’è½å¾… 5 åˆ†é˜ã€‚", "zh-CN": "æ‰¾ä¸ªå®‰é™è§’è½å¾… 5 åˆ†é’Ÿã€‚", "en": "Hide in a quiet corner for 5 minutes."}, author:{"zh-TW": "é´•é³¥å¿ƒæ…‹è²“", "zh-CN": "é¸µé¸Ÿå¿ƒæ€çŒ«", "en": "Ostrich Cat"} },
        { main:{"zh-TW": "åæ‡‰æ…¢æ²’é—œä¿‚ï¼Œå°¾å·´ä¹Ÿæœƒå»¶é²ã€‚", "zh-CN": "ååº”æ…¢æ²¡å…³ç³»ï¼Œå°¾å·´ä¹Ÿä¼šå»¶è¿Ÿã€‚", "en": "Lag is okayâ€”tails lag too."}, action:{"zh-TW": "å°å¤–å›ä¸€å¥ï¼šæˆ‘é‚„åœ¨æ€è€ƒã€‚", "zh-CN": "å¯¹å¤–å›ä¸€å¥ï¼šæˆ‘è¿˜åœ¨æ€è€ƒã€‚", "en": "Say: â€˜Iâ€™m still thinking.â€™"}, author:{"zh-TW": "å»¶é²è²“", "zh-CN": "å»¶è¿ŸçŒ«", "en": "Laggy Cat"} },
        { main:{"zh-TW": "éµç›¤æ˜¯æ•é ­çš„å½¢ç‹€ã€‚", "zh-CN": "é”®ç›˜æ˜¯æ•å¤´çš„å½¢çŠ¶ã€‚", "en": "The keyboard is pillow-shaped."}, action:{"zh-TW": "é›¢é–‹è¢å¹• 2 åˆ†é˜ã€‚", "zh-CN": "ç¦»å¼€å±å¹• 2 åˆ†é’Ÿã€‚", "en": "Step away from the screen for 2 minutes."}, author:{"zh-TW": "éµç›¤æ¯€æ»…è€…", "zh-CN": "é”®ç›˜æ¯ç­è€…", "en": "Keyboard Pillow"} },
        { main:{"zh-TW": "ç›¯è‘—ç°å¡µé£„ï¼Œä¹Ÿå¾ˆæœ‰è¶£ã€‚", "zh-CN": "ç›¯ç€ç°å°˜é£˜ï¼Œä¹Ÿå¾ˆæœ‰è¶£ã€‚", "en": "Watching dust is entertainment."}, action:{"zh-TW": "çœ‹çª—å¤– 60 ç§’ï¼Œä¸åšäº‹ã€‚", "zh-CN": "çœ‹çª—å¤– 60 ç§’ï¼Œä¸åšäº‹ã€‚", "en": "Look outside for 60 seconds. Do nothing."}, author:{"zh-TW": "æ”¾ç©ºè²“", "zh-CN": "æ”¾ç©ºçŒ«", "en": "Staring Cat"} },
        { main:{"zh-TW": "ä»Šå¤©ä¸ç‡Ÿæ¥­ã€‚æ”¹å¤©å†ä¾†ã€‚", "zh-CN": "ä»Šå¤©ä¸è¥ä¸šã€‚æ”¹å¤©å†æ¥ã€‚", "en": "Closed today. Try again later."}, action:{"zh-TW": "æ‹’æ‰ä¸€å€‹ä¸å¿…è¦çš„æœƒè­°ã€‚", "zh-CN": "æ‹’æ‰ä¸€ä¸ªä¸å¿…è¦çš„ä¼šè®®ã€‚", "en": "Cancel one unnecessary meeting."}, author:{"zh-TW": "æ‹’çµ•è²“", "zh-CN": "æ‹’ç»çŒ«", "en": "Refusal Cat"} },
        { main:{"zh-TW": "ç´¯åˆ°å¿˜äº†æŠŠèˆŒé ­æ”¶å›å»ã€‚", "zh-CN": "ç´¯åˆ°å¿˜äº†æŠŠèˆŒå¤´æ”¶å›å»ã€‚", "en": "So tired you forget your tongue."}, action:{"zh-TW": "åšå€‹é¬¼è‡‰ï¼Œæ”¾é¬†ä¸‹é¡ã€‚", "zh-CN": "åšä¸ªé¬¼è„¸ï¼Œæ”¾æ¾ä¸‹é¢šã€‚", "en": "Make a silly face. Relax your jaw."}, author:{"zh-TW": "å¿˜è¨˜æ”¶èˆŒé ­", "zh-CN": "å¿˜è®°æ”¶èˆŒå¤´", "en": "BleP Cat"} }],
      push: [{ main:{"zh-TW": "ä¸€æ¬¡åªå°ˆå¿ƒä¸€ä»¶äº‹ã€‚", "zh-CN": "ä¸€æ¬¡åªä¸“å¿ƒä¸€ä»¶äº‹ã€‚", "en": "One thing at a time."}, action:{"zh-TW": "è¨­å®š 10 åˆ†é˜è¨ˆæ™‚å™¨ï¼Œé€™æ®µåªåšä¸€ä»¶äº‹ã€‚", "zh-CN": "è®¾å®š 10 åˆ†é’Ÿè®¡æ—¶å™¨ï¼Œè¿™æ®µåªåšä¸€ä»¶äº‹ã€‚", "en": "Set 10 minutes. Do one task only."}, author:{"zh-TW": "è¿½å…‰è€…", "zh-CN": "è¿½å…‰è€…", "en": "Laser Focus"} },
        { main:{"zh-TW": "ç³å­”æ”¾å¤§ï¼Œé–å®šç›®æ¨™ã€‚", "zh-CN": "ç³å­”æ”¾å¤§ï¼Œé”å®šç›®æ ‡ã€‚", "en": "Eyes wide. Lock the target."}, action:{"zh-TW": "é—œæ‰é€šçŸ¥ 25 åˆ†é˜ã€‚", "zh-CN": "å…³æ‰é€šçŸ¥ 25 åˆ†é’Ÿã€‚", "en": "Turn off notifications for 25 minutes."}, author:{"zh-TW": "ç‹©çµè€…", "zh-CN": "ç‹©çŒè€…", "en": "The Hunter"} },
        { main:{"zh-TW": "é»˜é»˜åšï¼Œåšå®Œå†èªªã€‚", "zh-CN": "é»˜é»˜åšï¼Œåšå®Œå†è¯´ã€‚", "en": "Work in silence. Speak after."}, action:{"zh-TW": "å…ˆåšä¸€æ®µæœ€å°å¯äº¤ä»˜ã€‚", "zh-CN": "å…ˆåšä¸€æ®µæœ€å°å¯äº¤ä»˜ã€‚", "en": "Ship a tiny deliverable first."}, author:{"zh-TW": "åˆºå®¢è²“", "zh-CN": "åˆºå®¢çŒ«", "en": "Assassin Cat"} },
        { main:{"zh-TW": "è·¯ä¸é€šï¼Ÿé‚£å°±å¾€ä¸Šçˆ¬ã€‚", "zh-CN": "è·¯ä¸é€šï¼Ÿé‚£å°±å¾€ä¸Šçˆ¬ã€‚", "en": "No path? Climb vertically."}, action:{"zh-TW": "æ›å€‹è§’åº¦ï¼ŒæŠŠå•é¡Œæ‹†å°ã€‚", "zh-CN": "æ¢ä¸ªè§’åº¦ï¼ŒæŠŠé—®é¢˜æ‹†å°ã€‚", "en": "Change angle. Break it down."}, author:{"zh-TW": "æ”€å²©é«˜æ‰‹", "zh-CN": "æ”€å²©é«˜æ‰‹", "en": "Climber"} },
        { main:{"zh-TW": "å…ˆç£¨çˆªï¼Œå†å‡ºæ‹›ã€‚", "zh-CN": "å…ˆç£¨çˆªï¼Œå†å‡ºæ‹›ã€‚", "en": "Sharpen claws before action."}, action:{"zh-TW": "æŠŠå·¥å…·æº–å‚™å¥½ï¼šæ–‡ä»¶/ç´ æ/é€£çµã€‚", "zh-CN": "æŠŠå·¥å…·å‡†å¤‡å¥½ï¼šæ–‡ä»¶/ç´ æ/é“¾æ¥ã€‚", "en": "Prep tools: doc/assets/links."}, author:{"zh-TW": "å‚™æˆ°ç‹€æ…‹", "zh-CN": "å¤‡æˆ˜çŠ¶æ€", "en": "Battle Ready"} },
        { main:{"zh-TW": "åé’è›™ï¼šå…ˆè§£æœ€é›£çš„ã€‚", "zh-CN": "åé’è›™ï¼šå…ˆè§£æœ€éš¾çš„ã€‚", "en": "Eat the frog: hardest first."}, action:{"zh-TW": "åˆ—å‡º 1 ä»¶æœ€é›£çš„ï¼Œå…ˆåš 5 åˆ†é˜ã€‚", "zh-CN": "åˆ—å‡º 1 ä»¶æœ€éš¾çš„ï¼Œå…ˆåš 5 åˆ†é’Ÿã€‚", "en": "Pick the hardest item. Start 5 minutes."}, author:{"zh-TW": "è‰å¢è£¡çš„çœ¼ç›", "zh-CN": "è‰ä¸›é‡Œçš„çœ¼ç›", "en": "Ambush Eyes"} },
        { main:{"zh-TW": "è¡åˆº 10 åˆ†é˜ï¼Œä¼‘æ¯ 2 åˆ†é˜ã€‚", "zh-CN": "å†²åˆº 10 åˆ†é’Ÿï¼Œä¼‘æ¯ 2 åˆ†é’Ÿã€‚", "en": "Sprint 10, rest 2."}, action:{"zh-TW": "é–‹ä¸€å€‹çŸ­è¨ˆæ™‚å¾ªç’°ã€‚", "zh-CN": "å¼€ä¸€ä¸ªçŸ­è®¡æ—¶å¾ªç¯ã€‚", "en": "Start a short timer loop."}, author:{"zh-TW": "çµè±¹è¦ªæˆš", "zh-CN": "çŒè±¹äº²æˆš", "en": "Cheetah Cousin"} },
        { main:{"zh-TW": "ä¸è¦æƒ³å¤ªå¤šï¼Œå…ˆé–‹å§‹ã€‚", "zh-CN": "ä¸è¦æƒ³å¤ªå¤šï¼Œå…ˆå¼€å§‹ã€‚", "en": "Donâ€™t overthink. Start."}, action:{"zh-TW": "æŠŠç¬¬ä¸€æ­¥å¯«ä¸‹ä¾†ä¸¦å®Œæˆã€‚", "zh-CN": "æŠŠç¬¬ä¸€æ­¥å†™ä¸‹æ¥å¹¶å®Œæˆã€‚", "en": "Write the first step. Finish it."}, author:{"zh-TW": "ç¥ç¶“åå°„", "zh-CN": "ç¥ç»åå°„", "en": "Reflexes"} },
        { main:{"zh-TW": "æˆ´ä¸Šè€³æ©Ÿï¼Œé€²å…¥çµ•å°é ˜åŸŸã€‚", "zh-CN": "æˆ´ä¸Šè€³æœºï¼Œè¿›å…¥ç»å¯¹é¢†åŸŸã€‚", "en": "Headphones on. Enter the zone."}, action:{"zh-TW": "æ’­æ”¾ä¸€é¦–é‡è¤‡éŸ³æ¨‚ï¼Œé–å®šç¯€å¥ã€‚", "zh-CN": "æ’­æ”¾ä¸€é¦–é‡å¤éŸ³ä¹ï¼Œé”å®šèŠ‚å¥ã€‚", "en": "Loop one track to lock rhythm."}, author:{"zh-TW": "ç´™ç®±å ¡å£˜", "zh-CN": "çº¸ç®±å ¡å’", "en": "Box Fortress"} },
        { main:{"zh-TW": "æº–å‚™å¥½äº†å°±è·³ã€‚", "zh-CN": "å‡†å¤‡å¥½äº†å°±è·³ã€‚", "en": "When ready, pounce."}, action:{"zh-TW": "é¸ä¸€å€‹æ±ºç­–ï¼Œ5 ç§’å…§å®šæ¡ˆã€‚", "zh-CN": "é€‰ä¸€ä¸ªå†³ç­–ï¼Œ5 ç§’å†…å®šæ¡ˆã€‚", "en": "Pick one decision. Decide in 5 seconds."}, author:{"zh-TW": "ä¼æ“Šå°ˆå®¶", "zh-CN": "ä¼å‡»ä¸“å®¶", "en": "Ambush Expert"} }],
    };

    const CATS = [
      { id:"gentle", name:{'zh-TW':"æº«æŸ”è²“",'zh-CN':"æ¸©æŸ”çŒ«",'en':"Gentle"}, color:"#EADBC8" },
      { id:"focus",  name:{'zh-TW':"å°ˆæ³¨è²“",'zh-CN':"ä¸“æ³¨çŒ«",'en':"Focus"},  color:"#D7CCC8" },
      { id:"wise",   name:{'zh-TW':"æ™ºæ…§è²“",'zh-CN':"æ™ºæ…§çŒ«",'en':"Wise"},   color:"#CFD8DC" },
      { id:"rest",   name:{'zh-TW':"ä¼‘æ¯è²“",'zh-CN':"ä¼‘æ¯çŒ«",'en':"Rest"},   color:"#FFE0B2" }
    ];

    function CatSVG(props){
      return e("svg",{viewBox:"0 0 100 90"},
        e("path",{d:"M20 90 Q 10 50, 30 35 Q 40 25, 60 25 Q 80 25, 90 50 Q 100 90, 80 90 Z", fill:props.color}),
        e("path",{d:"M25 40 L 20 15 L 45 30", fill:props.color}),
        e("path",{d:"M75 40 L 80 15 L 55 30", fill:props.color}),
        e("path",{d:"M28 35 L 25 20 L 40 30", fill:"#FFCCBC", opacity:0.55}),
        e("path",{d:"M72 35 L 75 20 L 60 30", fill:"#FFCCBC", opacity:0.55}),
        e("circle",{cx:40, cy:55, r:4, fill:"#3E2723"}),
        e("circle",{cx:80, cy:55, r:4, fill:"#3E2723"}),
        e("path",{d:"M55 60 L 60 65 L 65 60", fill:"none", stroke:"#3E2723", strokeWidth: 1.5, strokeLinecap:"round", strokeLinejoin:"round"}),
        e("circle",{cx:60, cy:58, r:2, fill:"#FFAB91"})
      );
    }

    
    
    function CatLogoSVG(){
      const p = { width: 20, height: 20, viewBox: "0 0 100 90", fill: "none", stroke: "currentColor", strokeWidth: 1.5, strokeLinecap: "round", strokeLinejoin: "round" };
      return e("svg", p,
        e("path",{ d:"M20 90 Q 10 50, 30 35 Q 40 25, 60 25 Q 80 25, 90 50 Q 100 90, 80 90 Z" }),
        e("path",{ d:"M25 40 L 20 15 L 45 30" }),
        e("path",{ d:"M75 40 L 80 15 L 55 30" }),
        e("circle",{ cx:40, cy:55, r:3 }),
        e("circle",{ cx:80, cy:55, r:3 }),
        e("path",{ d:"M55 60 L 60 65 L 65 60" })
      );
    }

function SvgIcon(name){
      const common = { width: 18, height: 18, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 1.5, strokeLinecap: "round", strokeLinejoin: "round" };
      if (name === "fish") {
        return e("svg", common,
          e("path", { d:"M6.5 12c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z" }),
          e("path", { d:"M2 12c0 2 2 3.5 4 4.5 1.5.75 5 1.5 9 .5 2.5-.6 6-2 6-5s-3.5-4.4-6-5c-4-1-7.5-.25-9 .5-2 1-4 2.5-4 4.5z" }),
          e("path", { d:"M19 12c0 1.5 2 3 3 3v-6c-1 0-3 1.5-3 3z" })
        );
      }
      if (name === "bookmark") {
        return e("svg", common,
          e("path", { d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z" })
        );
      }
      if (name === "heart") {
        return e("svg", common,
          e("path", { d:"M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 21l7.8-7.6 1-1a5.5 5.5 0 0 0 0-7.8z" })
        );
      }
      if (name === "heartFill") {
        // Filled look using two paths; still stroke-only, but thicker to feel filled
        const filled = { width: 18, height: 18, viewBox: "0 0 24 24", fill: "currentColor", stroke: "none" };
        return e("svg", filled,
          e("path", { d:"M12 21s-7-4.6-9.3-8.6C.7 8.9 3 5.5 6.8 5.1c1.8-.2 3.6.6 5.2 2.2 1.6-1.6 3.4-2.4 5.2-2.2 3.8.4 6.1 3.8 4.1 7.3C19 16.4 12 21 12 21z" })
        );
      }
      if (name === "share") {
        return e("svg", common,
          e("path", { d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" }),
          e("polyline", { points:"16 6 12 2 8 6" }),
          e("line", { x1:"12", y1:"2", x2:"12", y2:"15" })
        );
      }
      if (name === "globe") {
        return e("svg", common,
          e("circle",{cx:"12", cy:"12", r:"10"}),
          e("path",{d:"M2 12h20"}),
          e("path",{d:"M12 2a15 15 0 0 1 0 20"}),
          e("path",{d:"M12 2a15 15 0 0 0 0 20"})
        );
      }
      if (name === "breath") {
        return e("svg", common,
          e("circle",{cx:"12", cy:"12", r:"10"}),
          e("path",{d:"M8 12h8"}),
          e("path",{d:"M12 8v8"})
        );
      }
      if (name === "palette") { return e("svg", common, e("path",{d:"M12 3a9 9 0 1 0 0 18h2a2 2 0 0 0 0-4h-1a1 1 0 0 1 0-2h1a4 4 0 0 0 0-8h-2"})); }
      if (name === "more") {
        return e("svg", common,
          e("circle",{cx:"5", cy:"12", r:"1"}),
          e("circle",{cx:"12", cy:"12", r:"1"}),
          e("circle",{cx:"19", cy:"12", r:"1"})
        );
      }
      if (name === "x") {
        return e("svg", common,
          e("line", { x1:"18", y1:"6", x2:"6", y2:"18" }),
          e("line", { x1:"6", y1:"6", x2:"18", y2:"18" })
        );
      }
      return e("span", null, "?");
    }

function parseCSV(text){
      const rows = [];
      let row = [], cur = "", inQuotes = false;
      for (let i=0;i<text.length;i++){
        const ch = text[i];
        const next = text[i+1];
        if (ch === '"' && next === '"') { cur += '"'; i++; continue; }
        if (ch === '"') { inQuotes = !inQuotes; continue; }
        if (!inQuotes && ch === ',') { row.push(cur); cur=""; continue; }
        if (!inQuotes && (ch === '\n' || ch === '\r')) {
          if (ch === '\r' && next === '\n') i++;
          row.push(cur); cur="";
          if (row.length > 1 || row[0] !== "") rows.push(row);
          row = [];
          continue;
        }
        cur += ch;
      }
      row.push(cur);
      if (row.length > 1 || row[0] !== "") rows.push(row);
      return rows;
    }

    function normalizeFromSheet(csvText){
      const rows = parseCSV(csvText);
      if (rows.length < 2) return null;
      const header = rows[0].map(h => (h||"").trim());
      const idx = (name) => header.indexOf(name);

      const iScenario = idx("scenarioIds");
      const iMain = idx("main_tw");
      const iAction = idx("action_tw");
      const iAuthor = idx("author_tw");

      const iMusicType = idx("music_type");
      const iMusicHintTW = idx("music_hint_tw");
      const iMusicHintCN = idx("music_hint_cn");
      const iMusicHintEN = idx("music_hint_en");
      const iMusicUrl = idx("music_url");
      if (iMain === -1) return null;

      const out = { start:[], conflict:[], win:[], tired:[], push:[] };

      for (let r=1;r<rows.length;r++){
        const cols = rows[r];
        const main = (cols[iMain] || "").trim();
        if (!main) continue;
        const action = iAction === -1 ? "" : (cols[iAction] || "").trim();
        const author = iAuthor === -1 ? "" : (cols[iAuthor] || "").trim();
        const scenarioIds = iScenario === -1 ? [] : (cols[iScenario] || "").split(",").map(s=>s.trim()).filter(Boolean);

        const musicType = iMusicType === -1 ? "" : (cols[iMusicType] || "").trim();
        const musicHint = {
          "zh-TW": iMusicHintTW === -1 ? "" : (cols[iMusicHintTW] || "").trim(),
          "zh-CN": iMusicHintCN === -1 ? "" : (cols[iMusicHintCN] || "").trim(),
          "en": iMusicHintEN === -1 ? "" : (cols[iMusicHintEN] || "").trim()
        };
        const musicUrl = iMusicUrl === -1 ? "" : (cols[iMusicUrl] || "").trim();

        const item = { main, action, author: author || "è²“å¤§å¸«", music_type: musicType, music_hint: musicHint, music_url: musicUrl };

        if (!scenarioIds.length){
          Object.keys(out).forEach(k => out[k].push(item));
        } else {
          scenarioIds.forEach(sid => { if (out[sid]) out[sid].push(item); });
        }
      }
      const total = Object.values(out).reduce((a,b)=>a+b.length,0);
      return total ? out : null;
    }

    function pickRandom(arr){
      return arr[Math.floor(Math.random()*arr.length)];
    }

    function safeReadJSON(key, fallback){
      try {
        const raw = localStorage.getItem(key);
        return raw ? JSON.parse(raw) : fallback;
      } catch(e) { return fallback; }
    }
    function safeWriteJSON(key, value){
      try { localStorage.setItem(key, JSON.stringify(value)); } catch(e) {}
    }

    function App(){
      const [step, setStep] = useState("state"); // state â†’ quote â†’ cat â†’ rx
      const [selectedState, setSelectedState] = useState(null);
      const [scenario, setScenario] = useState(null);
      const [quote, setQuote] = useState(null);

      const [rxNo, setRxNo] = useState(()=>{
        try { return parseInt(localStorage.getItem("rx_no")||"0"); } catch(e){ return 0; }
      });

      // Fish counter (persist)
      
      const [currentLang, setCurrentLang] = useState(()=>{
        try { return localStorage.getItem("meow_lang") || "zh-TW"; } catch(e){ return "zh-TW"; }
      });
      const [showLang, setShowLang] = useState(false);
      const [showMore, setShowMore] = useState(false);
      const [showBreath, setShowBreath] = useState(false);

const [showOnboarding, setShowOnboarding] = useState(()=>{
  try { return !localStorage.getItem("meow_onboarding_done"); } catch(e){ return true; }
});
function completeOnboarding(){
  try { localStorage.setItem("meow_onboarding_done","1"); } catch(e){}
  setShowOnboarding(false);
}

const CAT_THEMES = {
  classic: { label:{ "zh-TW":"ç¶“å…¸","zh-CN":"ç»å…¸","en":"Classic" }, icons:{ gentle:"/icons/classic/gentle.svg", focus:"/icons/classic/focus.svg", wise:"/icons/classic/wise.svg", rest:"/icons/classic/rest.svg" } },
  night:   { label:{ "zh-TW":"å¤œè¡Œ","zh-CN":"å¤œè¡Œ","en":"Night" },    icons:{ gentle:"/icons/night/gentle.svg", focus:"/icons/night/focus.svg", wise:"/icons/night/wise.svg", rest:"/icons/night/rest.svg" } },
  candy:   { label:{ "zh-TW":"ç³–æœ","zh-CN":"ç³–æœ","en":"Candy" },    icons:{ gentle:"/icons/candy/gentle.svg", focus:"/icons/candy/focus.svg", wise:"/icons/candy/wise.svg", rest:"/icons/candy/rest.svg" } }
};
const [catTheme, setCatTheme] = useState(()=>{ try { return localStorage.getItem("meow_cat_theme") || "classic"; } catch(e){ return "classic"; }});
const [showTheme, setShowTheme] = useState(false);
useEffect(()=>{ try { localStorage.setItem("meow_cat_theme", catTheme); } catch(e){} }, [catTheme]);
function getThemeText(val){
  if (!val) return "";
  if (typeof val === "string") return val;
  return val[currentLang] || val["zh-TW"] || val["zh-CN"] || val["en"] || "";
}
function getCatIcon(catId, fallbackNode){
  const theme = CAT_THEMES[catTheme] || CAT_THEMES.classic;
  const path = theme.icons && theme.icons[catId];
  if (path) return e("img",{src:path, alt:"", style:{width:"72px", height:"72px"}});
  return fallbackNode;
}

const audioRef = useRef({ ctx: null, stop: null, type: null });
      const linkAudioRef = useRef(null);
      const [isLinkPlaying, setIsLinkPlaying] = useState(false);
      const [linkUrlNow, setLinkUrlNow] = useState("");

const [isMusicPlaying, setIsMusicPlaying] = useState(false);

function stopMusic(){
  const a = audioRef.current;
  try { if (a.stop) a.stop(); } catch(e){}
  a.stop = null; a.type = null;
  setIsMusicPlaying(false);
}

function ensureCtx(){
  const a = audioRef.current;
  if (a.ctx && a.ctx.state !== "closed") return a.ctx;
  const Ctx = window.AudioContext || window.webkitAudioContext;
  if (!Ctx) return null;
  a.ctx = new Ctx();
  return a.ctx;
}

function playMusic(type){
  const ctx = ensureCtx();
  if (!ctx) return;

  if (audioRef.current.type === type && isMusicPlaying){
    stopMusic();
    return;
  }
  stopMusic();

  const makeNoise = () => {
    const bufferSize = 2 * ctx.sampleRate;
    const noiseBuffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
    const output = noiseBuffer.getChannelData(0);
    for (let i=0;i<bufferSize;i++) output[i] = Math.random()*2 - 1;
    const src = ctx.createBufferSource();
    src.buffer = noiseBuffer;
    src.loop = true;
    return src;
  };

  let stopFn = null;

  if (type === "white_noise") {
    const src = makeNoise();
    const gain = ctx.createGain();
    gain.gain.value = 0.03;
    src.connect(gain).connect(ctx.destination);
    src.start();
    stopFn = () => { try { src.stop(); } catch(e){}; };
  } else if (type === "rain") {
    const src = makeNoise();
    const filter = ctx.createBiquadFilter();
    filter.type = "lowpass";
    filter.frequency.value = 1200;
    const gain = ctx.createGain();
    gain.gain.value = 0.025;
    src.connect(filter).connect(gain).connect(ctx.destination);
    src.start();
    stopFn = () => { try { src.stop(); } catch(e){}; };
  } else if (type === "lofi") {
    const o1 = ctx.createOscillator();
    const o2 = ctx.createOscillator();
    o1.type = "sine"; o2.type = "triangle";
    o1.frequency.value = 220; o2.frequency.value = 110;
    const lp = ctx.createBiquadFilter();
    lp.type = "lowpass"; lp.frequency.value = 800;
    const g = ctx.createGain();
    g.gain.value = 0.015;
    o1.connect(lp); o2.connect(lp);
    lp.connect(g).connect(ctx.destination);
    o1.start(); o2.start();
    stopFn = () => { try { o1.stop(); o2.stop(); } catch(e){}; };
  } else {
    return;
  }

  audioRef.current.stop = stopFn;
  audioRef.current.type = type;
  setIsMusicPlaying(true);
}

function openMusicUrl(url){
  if (!url) return false;
  try { window.open(url, "_blank", "noopener,noreferrer"); return true; } catch(e){ return false; }
}

function playLinkAudio(url){
  if (!url) return false;
  // Only direct audio files are playable in-app (mp3/ogg/wav)
  const isDirect = /\.(mp3|ogg|wav)(\?|#|$)/i.test(url);
  if (!isDirect) return false;

  const el = linkAudioRef.current;
  if (!el) return false;

  // Toggle if same URL and currently playing
  if (linkUrlNow === url && !el.paused){
    el.pause();
    setIsLinkPlaying(false);
    return true;
  }

  try {
    el.src = url;
    el.currentTime = 0;
    const p = el.play();
    setLinkUrlNow(url);
    setIsLinkPlaying(true);
    if (p && typeof p.catch === "function"){
      p.catch(()=>{ setIsLinkPlaying(false); });
    }
    return true;
  } catch(e){
    setIsLinkPlaying(false);
    return false;
  }
}


useEffect(()=>{ if (step !== "rx" && isMusicPlaying) stopMusic(); }, [step]);
// stop link-audio when leaving RX
useEffect(()=>{
  if (step !== "rx" && linkAudioRef.current){
    try { linkAudioRef.current.pause(); } catch(e){}
    setIsLinkPlaying(false);
  }
}, [step]);



      function t(key){
        const pack = UI_TEXT[currentLang] || UI_TEXT["zh-TW"];
        return pack[key] || (UI_TEXT["zh-TW"][key] || key);
      }

      function getText(val){
        if (!val) return "";
        if (typeof val === "string") return val;
        return val[currentLang] || val["zh-TW"] || val["zh-CN"] || val["en"] || "";
      }

      useEffect(()=>{
        try { localStorage.setItem("meow_lang", currentLang); } catch(e){}
      }, [currentLang]);

      useEffect(()=>{
        const onDoc = (ev)=>{
          // close popovers on any outside click
          setShowMore(false);
          setShowLang(false);
            setShowTheme(false);
        };
        document.addEventListener('click', onDoc);
        return ()=> document.removeEventListener('click', onDoc);
      }, []);

const [fishCount, setFishCount] = useState(()=>{
        try { return parseInt(localStorage.getItem("meow_fish")||"0"); } catch(e){ return 0; }
      });

      // Favorites (persist)
      const [favorites, setFavorites] = useState(()=>{
        const raw = safeReadJSON("meow_favs", []);
        // migrate legacy shape: {main:string, action:string, author:string}
        return (raw || []).map(it => {
          if (!it) return null;
          if (typeof it.main === "string") it.main = {'zh-TW': it.main};
          if (typeof it.action === "string") it.action = {'zh-TW': it.action};
          if (typeof it.author === "string") it.author = {'zh-TW': it.author};
          return it;
        }).filter(Boolean);
      });
      const [showFavs, setShowFavs] = useState(false);

      const [toast, setToast] = useState("");

      const [headerScrolled, setHeaderScrolled] = useState(false);

      useEffect(()=>{
        const onScroll = ()=>{ setHeaderScrolled(window.scrollY > 6); };
        onScroll();
        window.addEventListener('scroll', onScroll, { passive:true });
        return ()=> window.removeEventListener('scroll', onScroll);
      }, []);


      const [quotesByScenario, setQuotesByScenario] = useState(FALLBACK_QUOTES);
      const [dataSource, setDataSource] = useState("fallback"); // sheet | fallback
      const [pendingCatId, setPendingCatId] = useState(null);

      useEffect(()=>{
        safeWriteJSON("meow_favs", favorites);
      }, [favorites]);

      useEffect(()=>{
        try { localStorage.setItem("meow_fish", String(fishCount)); } catch(e){}
      }, [fishCount]);

      useEffect(()=>{
        if (!GOOGLE_SHEET_CSV_URL) return;
        let cancelled = false;
        fetch(GOOGLE_SHEET_CSV_URL, { cache:"no-store" })
          .then(r=>r.text())
          .then(text=>{
            if (cancelled) return;
            const normalized = normalizeFromSheet(text);
            if (normalized) { setQuotesByScenario(normalized); setDataSource("sheet"); }
          })
          .catch(()=>{});
        return ()=>{ cancelled = true; };
      }, []);

      function showToast(msg){
        setToast(msg);
        setTimeout(()=>setToast(""), 1800);
      }

      function isFavCurrent(){
        if (!quote) return false;
        const key = getText(quote.main) + "||" + getText(quote.author) + "||" + getText(quote.action);
        return favorites.some(f => f.key === key);
      }

      function toggleFavorite(){
        if (!quote) return;
        const key = getText(quote.main) + "||" + getText(quote.author) + "||" + getText(quote.action);
        if (favorites.some(f => f.key === key)){
          setFavorites(favorites.filter(f => f.key !== key));
          showToast(t("removed"));
        } else {
          const item = {
            key,
            main: quote.main || {'zh-TW': ""},
            action: quote.action || {'zh-TW': ""},
            author: quote.author || {'zh-TW': ""},
            scenario: scenario || ""
          };
          setFavorites([item, ...favorites]);
          showToast(t("saved"));
        }
      }

      function removeFavorite(key){
        setFavorites(favorites.filter(f => f.key !== key));
      }

      function copyToClipboard(text){
        const footer = " â€” ä¾†è‡ª å–µï½æ™‚åˆ» Meow~ Moment";
        const payload = text + footer;
        if (navigator.clipboard && navigator.clipboard.writeText){
          navigator.clipboard.writeText(payload).then(()=>showToast(t("copied"))).catch(()=>showToast(t("copyFail")));
          return;
        }
        try {
          const ta = document.createElement("textarea");
          ta.value = payload;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          document.body.removeChild(ta);
          showToast(t("copied"));
        } catch(e){
          showToast(t("copyFail"));
        }
      }

      function shareCurrent(){
        if (!quote) { showToast(t("copyFail")); return; }
        const text = quote.main ? (quote.main + (quote.author ? (" â€” " + quote.author) : "")) : "";
        const action = quote.action ? ("\n\nè²“çš„è™•æ–¹ï¼š\n" + quote.action) : "";
        copyToClipboard(text + action + "\n");
      }

      function bumpFish(){
        const next = fishCount + 1;
        setFishCount(next);
      }

      function chooseState(s){
        setSelectedState(s);
        setScenario(s);
        const list = quotesByScenario[s] && quotesByScenario[s].length ? quotesByScenario[s] : FALLBACK_QUOTES[s];
        setQuote(pickRandom(list));
        setStep("quote");
        bumpFish();
      }

      function nextQuote(){
        const list = quotesByScenario[scenario] && quotesByScenario[scenario].length ? quotesByScenario[scenario] : FALLBACK_QUOTES[scenario];
        setQuote(pickRandom(list));
        setStep("quote");
        bumpFish();
      }

      function onPickCat(catId){
        setPendingCatId(catId);
        setTimeout(() => {
          const next = rxNo + 1;
          setRxNo(next);
          try { localStorage.setItem("rx_no", String(next)); } catch(e){}
          setStep("rx");
          setPendingCatId(null);
        }, 300);
      }

      function Header(){
        const favOn = isFavCurrent();
        const favCount = favorites.length;

        return e("div",{className:"header"+(headerScrolled?" scrolled":"")},
          e("div",{className:"header-inner"},
            e("div",{className:"brand"},
              e("div",{className:"logo"}, CatLogoSVG()),
              e("div",null,
                e("div",{className:"title"}, t("appTitle")),
                e("div",{className:"sub"}, t("appSubtitle"))
              )
            ),
            e("div",{className:"h-actions"},
              e("div",{className:"badge", title:""},
                e("span",{className:"fish"}, SvgIcon("fish")),
                e("span",{className:"count"}, String(fishCount))
              ),
              e("div",{className:"desktop-icons", style:{display:"flex", alignItems:"center", gap:"10px"}},
              e("div",{className:"icon-btn" , title:t("favorites"), onClick:()=>setShowFavs(true)},
                SvgIcon("bookmark")
              ),
              e("div",{className:"icon-btn", title: (favOn ? t("removed") : t("saved")), onClick:toggleFavorite},
                SvgIcon(favOn ? "heartFill" : "heart")
              ),
              e("div",{className:"icon-btn", title:"Breathing", onClick:()=>setShowBreath(true)}, SvgIcon("breath")),
              e("div",{className:"icon-btn", title:t("copy"), onClick:shareCurrent},
                SvgIcon("share")
              )
              ,
              e("div",{style:{position:"relative"}},
                e("div",{className:"icon-btn", title:t("lang"), onClick:(ev)=>{ ev.stopPropagation(); setShowLang(!showLang); }},
                  SvgIcon("globe")
                ),
                showLang ? e("div",{className:"lang-menu", onClick:(ev)=>ev.stopPropagation()},
                  ["zh-TW","zh-CN","en"].map(code =>
                    e("div",{
                      key:code,
                      className:"lang-item"+(currentLang===code?" active":""),
                      onClick:()=>{
                        setCurrentLang(code);
                        setShowLang(false);
            setShowTheme(false);
                      }
                    },
                      e("span",null, code==="zh-TW" ? "ç¹é«”ä¸­æ–‡" : (code==="zh-CN" ? "ç®€ä½“ä¸­æ–‡" : "English")),
                      currentLang===code ? e("span",null,"âœ“") : null
                    )
                  )
                ) : null
              )

              ),
              e("div",{className:"mobile-more more-wrap", style:{display:"flex"} , onClick:(ev)=>ev.stopPropagation()},
                e("div",{className:"icon-btn", title:"More", onClick:(ev)=>{ ev.stopPropagation(); setShowMore(!showMore); }},
                  SvgIcon("more")
                ),
                showMore ? e("div",{className:"more-menu", onClick:(ev)=>ev.stopPropagation()},
                  e("div",{className:"more-item", onClick:()=>{ setShowBreath(true); setShowMore(false); }},
                    e("div",{className:"more-left"}, SvgIcon("breath"), e("span",null,
                      currentLang==="en" ? "Breathing"
                      : (currentLang==="zh-CN" ? "å‘¼å¸ç»ƒä¹ " : "å‘¼å¸ç·´ç¿’")
                    )),
                    null
                  ),

                  e("div",{className:"more-item", onClick:()=>setShowFavs(true)},
                    e("div",{className:"more-left"}, SvgIcon("bookmark"), e("span",null, t("favorites"))),
                    e("div",{className:"more-right"}, String(favorites.length))
                  ),
                  e("div",{className:"more-item", onClick:toggleFavorite},
                    e("div",{className:"more-left"}, SvgIcon(isFavCurrent()? "heartFill":"heart"), e("span",null, isFavCurrent()? t("removed") : t("saved"))),
                    null
                  ),
                  e("div",{className:"more-item", onClick:shareCurrent},
                    e("div",{className:"more-left"}, SvgIcon("share"), e("span",null, t("copy"))),
                    null
                  ),
                  e("div",{className:"more-item", onClick:(ev)=>{ ev.stopPropagation(); setShowLang(!showLang); }},
                    e("div",{className:"more-left"}, SvgIcon("globe"), e("span",null, t("lang"))),
                    null
                  )
                ) : null
              )

            )
          )
        );
      }

      function FavoritesDrawer(){
        if (!showFavs) return null;
        return e("div",{className:"overlay", onClick:()=>setShowFavs(false)},
          e("div",{className:"drawer", onClick:(ev)=>ev.stopPropagation()},
            e("div",{style:{display:"flex", alignItems:"center", justifyContent:"space-between", gap:"10px"}},
              e("h3",null, t("favorites")),
              e("div",{className:"icon-btn", title:t("close"), onClick:()=>setShowFavs(false)},
                SvgIcon("x")
              )
            ),
            favorites.length === 0
              ? e("p",{className:"muted"}, t("favEmpty"))
              : favorites.map(f =>
                  e("div",{key:f.key, className:"fav-item"},
                    e("div",{className:"fav-main"}, "â€œ" + getText(f.main) + "â€"),
                    e("div",{className:"fav-meta"},
                      e("span",null, getText(f.author) ? ("â€” " + getText(f.author)) : ""),
                      e("span",null, f.scenario ? f.scenario : "")
                    ),
                    getText(f.action) ? e("div",{style:{marginTop:"10px", color:"#555", fontSize:"13px", lineHeight:"1.6"}}, getText(f.action)) : null,
                    e("div",{className:"fav-actions"},
                      e("button",{className:"secondary", onClick:()=>copyToClipboard("â€œ"+getText(f.main)+"â€ â€” "+(getText(f.author)||"") + (getText(f.action)?("\n\n"+t("masterRx")+"ï¼š\n"+getText(f.action)):"") + "\n")}, t("copy")),
                      e("button",{className:"secondary", onClick:()=>removeFavorite(f.key)}, t("remove"))
                    )
                  )
                )
          )
        );
      }

      
      function BreathingModal(){
        if(!showBreath) return null;
        return e("div",{className:"breath-overlay", onClick:()=>setShowBreath(false)},
          e("div",{className:"breath-modal", onClick:(ev)=>ev.stopPropagation()},
            e("div",{className:"breath-title"}, t("masterRx")),
            e("div",{className:"breath-sub"}, currentLang==="en"
              ? "Breathe with the cat Â· 4â€“4â€“6"
              : (currentLang==="zh-CN"
                ? "è·Ÿç€çŒ«å‘¼å¸ Â· 4â€“4â€“6"
                : "è·Ÿè‘—è²“å‘¼å¸ Â· 4â€“4â€“6")),
            e("div",{className:"breath-circle"},
              currentLang==="en" ? "Inhale Â· Hold Â· Exhale"
              : (currentLang==="zh-CN" ? "å¸æ°” Â· åœç•™ Â· å‘¼æ°”" : "å¸æ°£ Â· åœç•™ Â· å‘¼æ°£")
            ),
            e("div",{className:"breath-actions"},
              e("button",{className:"secondary", onClick:()=>setShowBreath(false)}, t("close"))
            )
          )
        );
      }

      return e("div", null,
        showOnboarding ? e("div",{className:"onboard-overlay", onClick:completeOnboarding},
          e("div",{className:"onboard-card", onClick:(ev)=>ev.stopPropagation()},
            e("div",{className:"onboard-title"}, (currentLang==="en"?"MEOW~ MOMENT":(currentLang==="zh-CN"?"å–µï½æ—¶åˆ»":"å–µï½æ™‚åˆ»"))),
            e("div",{className:"onboard-copy"}, currentLang==="en"
              ? "This isnâ€™t a quotes app. Itâ€™s a 3-minute reset, guided by cats."
              : (currentLang==="zh-CN"
                ? "è¿™ä¸æ˜¯åè¨€ Appï¼Œè€Œæ˜¯ 3 åˆ†é’Ÿçš„å¿ƒç† resetã€‚"
                : "é€™ä¸æ˜¯åè¨€ Appï¼Œè€Œæ˜¯ 3 åˆ†é˜çš„å¿ƒç† resetã€‚")),
            e("div",{className:"onboard-steps"},
              e("div",{className:"onboard-step"}, e("div",{className:"onboard-num"},"â‘ "), e("div",null, currentLang==="en"?"Pick your current mood":"é¸æ“‡ä½ ç¾åœ¨çš„ç‹€æ…‹")),
              e("div",{className:"onboard-step"}, e("div",{className:"onboard-num"},"â‘¡"), e("div",null, currentLang==="en"?"Read one line":"è®€ä¸€å¥è²“èª")),
              e("div",{className:"onboard-step"}, e("div",{className:"onboard-num"},"â‘¢"), e("div",null, currentLang==="en"?"Pick a cat and receive a prescription":"é¸ä¸€éš»è²“é ˜è™•æ–¹"))
            ),
            e("button",{onClick:completeOnboarding}, currentLang==="en"?"Let the cat lead ğŸ¾":(currentLang==="zh-CN"?"å¥½ï¼Œè®©çŒ«å¸¦è·¯ ğŸ¾":"å¥½ï¼Œè®“è²“å¸¶è·¯ ğŸ¾"))
          )
        ) : null,

        e(Header, null),
        e(FavoritesDrawer, null),
        e("div",{className:"wrap"},
          e("div",{className:"top-space"}),

          step==="state" ? e("div",{className:"card"},
            e("h2",null, t("stateTitle")),
            e("p",{className:"muted"}, t("stateSubtitle")),
            e("div",{className:"badge"}, t("dataSource"), " ", (dataSource === "sheet" ? t("dsSheet") : t("dsFallback"))),
            e("div",{className:"states"},
              STATES.map(s =>
                e("div",{
                  key:s.id,
                  className:"state"+(selectedState===s.id?" active":""),
                  onClick:()=>chooseState(s.id)
                },
                  e("span",{className:"icon"},s.icon),
                  e("span",null, getText(s.label))
                )
              )
            )
          ) : null,

          step==="quote" ? e("div",{className:"card"},
            e("h2",null,"ğŸ¾ "+t("todayQuote")),
            e("div",{className:"quote"}, quote ? getText(quote.main) : ""),
            e("div",{className:"author"}, "â€” " + (quote ? getText(quote.author) : "")),
            e("p",{className:"muted", style:{textAlign:"center"}}, t("pickCat")),
            e("div",{className:"cats"},
              CATS.map(c =>
                e("div",{key:c.id, className:"cat", onClick:()=>onPickCat(c.id)},
                  pendingCatId === c.id ? e("div",{className:"stamp"},"ğŸ¾") : null,
                  getCatIcon(c.id, e(CatSVG,{color:c.color})),
                  e("div",{className:"cat-name"}, getText(c.name))
                )
              )
            ),
            e("div",{className:"actions"},
              e("button",{className:"secondary", onClick:()=>setStep("state")}, t("changeState"))
            )
          ) : null,

          step==="rx" ? e("div",{className:"card"},
            e("h2",null,"ğŸ¾ "+t("masterRx")),
            e("div",{className:"rx"},
              e("div",{className:"rx-head"},
                e("span",null,"RX-"+String(rxNo).padStart(4,"0")),
                e("span",null,new Date().toLocaleDateString("zh-TW"))
              ),
              e("div",{className:"rx-body"},
                quote && quote.action ? getText(quote.action) : t("rxMissing")
              ),
              (true && ((quote.music_type && quote.music_type !== "") || (quote.music_hint && getText(quote.music_hint)) || (quote.music_url && quote.music_url !== ""))) ? e("div",{style:{marginTop:"14px"}},
  e("div",{style:{textAlign:"center", fontSize:"12px", color:"#7d7d7d", letterSpacing:".14em"}},
    "ğŸ§ ",
    (currentLang==="en" ? "Music suggestion" : (currentLang==="zh-CN" ? "çŒ«çš„éŸ³ä¹å»ºè®®" : "è²“çš„éŸ³æ¨‚å»ºè­°"))
  ),

  // Hint text
  (quote.music_hint && getText(quote.music_hint)) ? e("div",{style:{marginTop:"8px", fontSize:"13px", color:"#444", lineHeight:"1.6", textAlign:"center"}}, getText(quote.music_hint)) : null,

  // Controls row
  e("div",{style:{marginTop:"10px", display:"flex", justifyContent:"center", gap:"10px", flexWrap:"wrap"}},
    // Play/Pause (ambient) if music_type present
    (quote.music_type && quote.music_type !== "") ? e("button",{
        className:"secondary",
        onClick:()=>playMusic(quote.music_type || "")
      },
        (isMusicPlaying && (audioRef.current.type === (quote.music_type || "")))
          ? (currentLang==="en" ? "Pause" : (currentLang==="zh-CN" ? "æš‚åœ" : "æš«åœ"))
          : (currentLang==="en" ? "Play" : (currentLang==="zh-CN" ? "æ’­æ”¾" : "æ’­æ”¾"))
      ) : null,

    // Open Link if music_url present
    (quote.music_url && quote.music_url !== "") ? e("button",{
        className:"secondary",
        onClick:()=>{ const url = quote.music_url || ""; const ok = playLinkAudio(url); if (!ok){ const opened = openMusicUrl(url); if (!opened) playMusic(quote.music_type || ""); } }
      },
        (currentLang==="en" ? "Open link" : (currentLang==="zh-CN" ? "æ‰“å¼€é“¾æ¥" : "é–‹å•Ÿé€£çµ"))
      ) : null
  ),

  // Status line
  e("div",{style:{marginTop:"8px", fontSize:"11px", color:"#888", letterSpacing:".12em", textAlign:"center"}},
    (quote.music_url && quote.music_url !== "") 
      ? (currentLang==="en" ? "Tip: open in a new tab" : (currentLang==="zh-CN" ? "æç¤ºï¼šæ–°æ ‡ç­¾é¡µæ‰“å¼€" : "æç¤ºï¼šæœƒåœ¨æ–°åˆ†é é–‹å•Ÿ"))
      : ((isMusicPlaying && (audioRef.current.type === (quote.music_type || "")))
          ? ((currentLang==="en" ? "Now playing" : (currentLang==="zh-CN" ? "æ­£åœ¨æ’­æ”¾" : "æ­£åœ¨æ’­æ”¾")) + " Â· " + (quote.music_type||""))
          : (currentLang==="en" ? "Tap Play to start" : (currentLang==="zh-CN" ? "ç‚¹æ’­æ”¾å¼€å§‹" : "é»æ’­æ”¾é–‹å§‹"))
        )
  )
) : null,e("div",{className:"rx-foot"},"CAT MASTER RECIPE")
            ),
            e("div",{className:"actions"},
              e("button",{onClick:nextQuote}, t("again")),
              e("button",{className:"secondary", onClick:()=>setStep("state")}, t("changeState"))
            )
          ) : null
        ),
        e("div",{className:"toast"+(toast? " show": "")}, toast),
        e("audio",{ref:linkAudioRef, preload:"none", style:{display:"none"}, onEnded:()=>setIsLinkPlaying(false), onPause:()=>setIsLinkPlaying(false), onPlay:()=>setIsLinkPlaying(true)}),
        e(BreathingModal, null)
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(e(App));
  </script>
</body>
</html>
